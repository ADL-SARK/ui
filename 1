-- ShattuckHubUI.lua（远程版本）

local ShattuckHubUI = {}

function ShattuckHubUI:Window(options)
    options = options or {}
    local Window = {}

    local Players = game:GetService("Players")
    local LocalPlayer = Players.LocalPlayer
    local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")
    local RunService = game:GetService("RunService")
    local UserInputService = game:GetService("UserInputService")

    -- ScreenGui
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = options.Title or "ShattuckHubUI"
    screenGui.Parent = PlayerGui

    -- 主面板
    local mainFrame = Instance.new("Frame")
    mainFrame.Size = options.Size or UDim2.fromOffset(600,400)
    mainFrame.Position = UDim2.new(0.5, -300, 0.5, -200)
    mainFrame.BackgroundColor3 = Color3.fromRGB(20,20,20)
    mainFrame.BorderSizePixel = 0
    mainFrame.Parent = screenGui

    local uiCorner = Instance.new("UICorner")
    uiCorner.CornerRadius = UDim.new(0,12)
    uiCorner.Parent = mainFrame

    local uiStroke = Instance.new("UIStroke")
    uiStroke.Color = Color3.fromRGB(255,255,255)
    uiStroke.Thickness = 2
    uiStroke.Parent = mainFrame

    -- 彩虹标题
    local title = Instance.new("TextLabel")
    title.Size = UDim2.new(1,0,0,50)
    title.Position = UDim2.new(0,0,0,0)
    title.BackgroundTransparency = 1
    title.Text = options.Title or "Tech Hub"
    title.Font = Enum.Font.GothamBold
    title.TextSize = 28
    title.TextColor3 = Color3.fromRGB(255,0,0)
    title.Parent = mainFrame

    -- 彩虹动画
    local rainbowColors = {
        Color3.fromRGB(255,0,0),
        Color3.fromRGB(255,127,0),
        Color3.fromRGB(255,255,0),
        Color3.fromRGB(0,255,0),
        Color3.fromRGB(0,255,255),
        Color3.fromRGB(0,0,255),
        Color3.fromRGB(139,0,255)
    }
    local colorIndex = 1
    RunService.RenderStepped:Connect(function()
        if options.Rainbow then
            title.TextColor3 = rainbowColors[colorIndex]
            colorIndex = colorIndex + 1
            if colorIndex > #rainbowColors then colorIndex = 1 end
        end
    end)

    -- 标签页
    function Window:Tab(name)
        local Tab = {}
        Tab.Buttons = {}
        Tab.Sliders = {}
        Tab.Dropdowns = {}
        Tab.TextBoxes = {}

        -- 按钮方法
        function Tab:Button(info)
            local btn = Instance.new("TextButton")
            btn.Size = UDim2.new(0,200,0,40)
            btn.Position = UDim2.new(0.5,-100,0,70 + #Tab.Buttons*50)
            btn.BackgroundColor3 = Color3.fromRGB(40,40,40)
            btn.TextColor3 = Color3.fromRGB(255,255,255)
            btn.Text = info.Text or "按钮"
            btn.Font = Enum.Font.Gotham
            btn.TextSize = 20
            btn.Parent = mainFrame

            local uic = Instance.new("UICorner")
            uic.CornerRadius = UDim.new(0,8)
            uic.Parent = btn

            btn.MouseButton1Click:Connect(function()
                if info.Callback then info.Callback() end
            end)

            table.insert(Tab.Buttons, btn)
        end

        -- 滑块方法
        function Tab:Slider(info)
            local sliderFrame = Instance.new("Frame")
            sliderFrame.Size = UDim2.new(0,300,0,20)
            sliderFrame.Position = UDim2.new(0.5,-150,0,70 + #Tab.Sliders*50)
            sliderFrame.BackgroundColor3 = Color3.fromRGB(40,40,40)
            sliderFrame.Parent = mainFrame

            local uic = Instance.new("UICorner")
            uic.CornerRadius = UDim.new(0,8)
            uic.Parent = sliderFrame

            local handle = Instance.new("TextButton")
            handle.Size = UDim2.new(0,20,1,0)
            handle.Position = UDim2.new(0,0,0,0)
            handle.BackgroundColor3 = Color3.fromRGB(255,255,255)
            handle.Text = ""
            handle.Parent = sliderFrame

            local dragging = false
            handle.InputBegan:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 then dragging = true end
            end)
            handle.InputEnded:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 then dragging = false end
            end)
            RunService.RenderStepped:Connect(function()
                if dragging then
                    local mouseX = UserInputService:GetMouseLocation().X
                    local relativeX = math.clamp(mouseX - sliderFrame.AbsolutePosition.X,0,sliderFrame.AbsoluteSize.X)
                    handle.Position = UDim2.new(0, relativeX-10,0,0)
                    if info.Callback then
                        local val = math.floor(relativeX / sliderFrame.AbsoluteSize.X * (info.Max - info.Min) + info.Min)
                        info.Callback(val)
                    end
                end
            end)

            table.insert(Tab.Sliders, sliderFrame)
        end

        -- 下拉框方法
        function Tab:Dropdown(info)
            local dropdown = Instance.new("TextButton")
            dropdown.Size = UDim2.new(0,200,0,40)
            dropdown.Position = UDim2.new(0.5,-100,0,70 + #Tab.Dropdowns*50)
            dropdown.BackgroundColor3 = Color3.fromRGB(40,40,40)
            dropdown.TextColor3 = Color3.fromRGB(255,255,255)
            dropdown.Text = info.Default or info.Values[1] or "选择"
            dropdown.Font = Enum.Font.Gotham
            dropdown.TextSize = 18
            dropdown.Parent = mainFrame

            local optionsFrame = Instance.new("Frame")
            optionsFrame.Size = UDim2.new(0,200,0,0)
            optionsFrame.Position = UDim2.new(0,0,1,0)
            optionsFrame.BackgroundColor3 = Color3.fromRGB(30,30,30)
            optionsFrame.Parent = dropdown

            local uic = Instance.new("UICorner")
            uic.CornerRadius = UDim.new(0,8)
            uic.Parent = optionsFrame

            local expanded = false
            dropdown.MouseButton1Click:Connect(function()
                expanded = not expanded
                optionsFrame.Size = UDim2.new(0,200,0, expanded and #info.Values*40 or 0)
            end)

            for i,v in ipairs(info.Values) do
                local opt = Instance.new("TextButton")
                opt.Size = UDim2.new(1,0,0,40)
                opt.Position = UDim2.new(0,0,0,(i-1)*40)
                opt.BackgroundColor3 = Color3.fromRGB(40,40,40)
                opt.TextColor3 = Color3.fromRGB(255,255,255)
                opt.Text = v
                opt.Font = Enum.Font.Gotham
                opt.TextSize = 18
                opt.Parent = optionsFrame
                opt.MouseButton1Click:Connect(function()
                    dropdown.Text = v
                    optionsFrame.Size = UDim2.new(0,200,0,0)
                    if info.Callback then info.Callback(v) end
                end)
            end

            table.insert(Tab.Dropdowns, dropdown)
        end

        -- 文本框方法
        function Tab:TextBox(info)
            local tb = Instance.new("TextBox")
            tb.Size = UDim2.new(0,200,0,40)
            tb.Position = UDim2.new(0.5,-100,0,70 + #Tab.TextBoxes*50)
            tb.BackgroundColor3 = Color3.fromRGB(40,40,40)
            tb.TextColor3 = Color3.fromRGB(255,255,255)
            tb.PlaceholderText = info.Placeholder or ""
            tb.Text = info.Text or ""
            tb.Font = Enum.Font.Gotham
            tb.TextSize = 18
            tb.Parent = mainFrame

            tb.FocusLost:Connect(function(enter)
                if info.Callback then info.Callback(tb.Text) end
            end)

            table.insert(Tab.TextBoxes, tb)
        end

        return Tab
    end

    function Window:Show()
        screenGui.Enabled = true
    end

    function Window:Hide()
        screenGui.Enabled = false
    end

    return Window
end

return ShattuckHubUI
